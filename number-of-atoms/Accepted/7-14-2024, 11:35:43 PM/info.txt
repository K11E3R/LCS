{"id":1321195117,"question_id":726,"lang":"cpp","lang_name":"C++","time":"1 week, 4 days","timestamp":1720992943,"status":10,"status_display":"Accepted","runtime":"22 ms","url":"/submissions/detail/1321195117/","is_pending":"Not Pending","title":"Number of Atoms","memory":"23.6 MB","code":"// Time:  O(n)\n// Space: O(n)\n\nclass Solution {\npublic:\n    string countOfAtoms(string formula) {\n        stack<map<string, int>> stk;\n        stk.emplace();\n        int submatches[] = { 1, 2, 3, 4, 5 };\n        const auto e = regex(\"([A-Z][a-z]*)(\\\\d*)|(\\\\()|(\\\\))(\\\\d*)\");\n        for (regex_token_iterator<string::iterator> it(formula.begin(), formula.end(), e, submatches), end;\n             it != end;) {\n            const auto& name = (it++)->str();\n            const auto& m1 = (it++)->str();\n            const auto& left_open = (it++)->str();\n            const auto& right_open = (it++)->str();\n            const auto& m2 = (it++)->str();\n            if (!name.empty()) {\n                stk.top()[name] += stoi(!m1.empty() ? m1 : \"1\");\n            }\n            if (!left_open.empty()) {\n                stk.emplace();\n            }\n            if (!right_open.empty()) {\n                const auto top = move(stk.top()); stk.pop();\n                for (const auto& kvp: top) {\n                    stk.top()[kvp.first] += kvp.second * stoi(!m2.empty() ? m2 : \"1\");\n                }\n            }\n        }\n        string result;\n        for (const auto& kvp : stk.top()) {\n            result += kvp.first;\n            if (kvp.second > 1) {\n                result += to_string(kvp.second);\n            }\n        }\n        return result;\n    }\n};","compare_result":"1111111111111111111111111111111","title_slug":"number-of-atoms","has_notes":true,"flag_type":1}